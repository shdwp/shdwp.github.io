<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>        
    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Vasyl  Horbachenko | FF XIV Plugins</title>
    <meta name="author" content="Vasyl  Horbachenko" />
    <meta name="description" content="A number of plugins for MMO Final Fantasy XIV." />


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/monokai.css" />

    <!-- Styles -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üî•</text></svg>">
    <link rel="stylesheet" href="/about/assets/css/main.css">
    <link rel="canonical" href="http://localhost:4000/about/projects/2022/xiv/">

    <!-- Dark Mode -->
    <script src="/about/assets/js/theme.js"></script>
    <script src="/about/assets/js/dark_mode.js"></script>
  </head>

  <!-- Body -->
  <body class="fixed-top-navsticky-bottom-footer">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="http://localhost:4000/about/"><span class="font-weight-bold">Vasyl</span>   Horbachenko</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/about/">about</a>
              </li>
              

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/about/projects/">projects</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/about/none">resume</a>
              </li>
              <li class="nav-item dropdown ">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">miscellaneous</a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/about/publications/">publication</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="/about/projects/">projects</a>
                </div>
              </li>

              <!-- Toogle theme mode -->
              <div class="toggle-container">
                <a id="light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </a>
              </div>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <br>

    <!-- Content -->
    <div class="container mt-5">
      <!-- page.html -->
        <div class="post">

          <header class="post-header">
            <h1 class="post-title">FF XIV Plugins</h1>
          </header>

          <article>
            <p>It should be started with the fact that Final Fantasy doesn‚Äôt have an official plugin system like WoW does. But thanks to some members of the community there is an API and injector, all of which rely on community reverse-engineering efforts. Those are made in two areas: network packet interception &amp; decoding and static + dynamic assembly analysis.</p>

<p>Developing plugins for said system is not easy, and while you can avoid reverse-engineering if you stick to already discovered API, it‚Äôs still pretty tricky since it involves a lot of function hooking. Game was made in C/C++ so it‚Äôs all x86_64. Plugins themselves are made with C#, which is ran in injected Mono instance.</p>

<p>During the span of late 2021 - early 2022 I have created three plugins for said community plugin system:</p>

<h3 id="faderplugin">FaderPlugin</h3>
<div class="project-cutout">
    <table>
        
        <tr>
            <td>Short: </td>
            <td>
<p>Plugin to conditionally hide elements of user interface</p>
</td>
        </tr>
        

        
        <tr>
            <td>Tech: </td>
            <td>
<p>C#, Mono</p>
</td>
        </tr>
        

        
        <tr>
            <td>Links: </td>
            <td>
<p><a href="http://github.com/xivFaderPlugin" target="_blank" rel="noopener noreferrer">Github</a></p>
</td>
        </tr>
        

        
        <tr>
            <td>Downloads: </td>
            <td>
<p>More than 15,000</p>
</td>
        </tr>
        
    </table>
</div>

<p>Plugin hijacks into in-game HUD system to control the visibility of the elements based on in-game conditions, for example hiding elements of the interface when you‚Äôre out of combat.
Interface API was already reverse-engineered at that point so I only had to make use of it, albeit it still took changing the approach to ‚Äúhiding‚Äù a number times until it was stable and was working for all of the elements.</p>

<p>Configuration is done in a matrix arrangement, which was very usable at the beginning when there weren‚Äôt many conditions, but now UI is due to rework since said matrix now occupies a better half of the screen. I actually received a number of UI sketches from users of the plugin and will implement one of those ideas eventually.</p>

<figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/about/assets/img/projects/2022/xiv_2-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/about/assets/img/projects/2022/xiv_2-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/about/assets/img/projects/2022/xiv_2-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid figure-img l-page rounded z-depth-1" src="/about/assets/img/projects/2022/xiv_2.png" title="fader plugin" data-zoomable="">

  </picture>

</figure>

<h3 id="partyicons">PartyIcons</h3>
<div class="project-cutout">
    <table>
        
        <tr>
            <td>Short: </td>
            <td>
<p>Plugin to replace character names with role information</p>
</td>
        </tr>
        

        
        <tr>
            <td>Tech: </td>
            <td>
<p>C#, Mono</p>
</td>
        </tr>
        

        
        <tr>
            <td>Links: </td>
            <td>
<p><a href="http://github.com/xivPartyIcons" target="_blank" rel="noopener noreferrer">Github</a></p>
</td>
        </tr>
        

        
        <tr>
            <td>Downloads: </td>
            <td>
<p>More than 22,000</p>
</td>
        </tr>
        
    </table>
</div>

<p>Instead of showing character names, plugin can show their class icons or raid positions (in XIV players usually have positions assigned to them for easier communication).
In addition to that, plugin actually listens to the chat to figure out which position is taken by which player automatically.</p>

<p>Plugin hijacks a number of things: character nameplates (I‚Äôve found a hook signature in another plugin, but still had to decipher some of the structs in memory), messages in chat (to add the role prefix to character messages) and player character context menus (later two had an API fortunately).</p>

<p>Initially there were only three presets for nameplates, but that number grew considerably with suggestions from the users.</p>

<figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/about/assets/img/projects/2022/xiv_3-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/about/assets/img/projects/2022/xiv_3-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/about/assets/img/projects/2022/xiv_3-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid figure-img l-page rounded z-depth-1" src="/about/assets/img/projects/2022/xiv_3.png" title="partyicons" data-zoomable="">

  </picture>

</figure>

<figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/about/assets/img/projects/2022/xiv_4-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/about/assets/img/projects/2022/xiv_4-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/about/assets/img/projects/2022/xiv_4-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid figure-img l-page rounded z-depth-1" src="/about/assets/img/projects/2022/xiv_4.png" title="partyicons" data-zoomable="">

  </picture>

</figure>

<figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/about/assets/img/projects/2022/xiv_5-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/about/assets/img/projects/2022/xiv_5-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/about/assets/img/projects/2022/xiv_5-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid figure-img l-page rounded z-depth-1" src="/about/assets/img/projects/2022/xiv_5.png" title="partyicons" data-zoomable="">

  </picture>

</figure>

<h3 id="raidbufftracker">RaidBuffTracker</h3>
<div class="project-cutout">
    <table>
        
        <tr>
            <td>Short: </td>
            <td>
<p>Plugin to track party member cooldowns</p>
</td>
        </tr>
        

        
        <tr>
            <td>Tech: </td>
            <td>
<p>C#, Mono</p>
</td>
        </tr>
        

        
        <tr>
            <td>Links: </td>
            <td>
<p><a href="http://github.com/xivRaidBuffTracker" target="_blank" rel="noopener noreferrer">Github</a></p>
</td>
        </tr>
        

        
    </table>
</div>

<p>Plugin displays a widget with relevant party member cooldowns, allowing you to align your actions to fall under buffs, or quickly tell if you‚Äôre supposed to make required action, because everyone else have that action on cooldown.</p>

<p>For this one plugin intercepts network messages, contents of which I had to decipher (so I can figure out which packet is action invocation, whom it belongs to and which action it is).
While the previous two plugins were rather light on the architectural side of thing, this one is done more properly, using Ninject for it‚Äôs DI (which I had to hook up with game‚Äôs own DI system).</p>

<p>During the development I worked with a experienced raider to figure out which actions people would be interested in tracking, with list growing from initial 16 to staggering 48.</p>

<figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/about/assets/img/projects/2022/xiv_6-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/about/assets/img/projects/2022/xiv_6-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/about/assets/img/projects/2022/xiv_6-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid figure-img l-page rounded z-depth-1" src="/about/assets/img/projects/2022/xiv_6.png" title="raidbufftracker" data-zoomable="">

  </picture>

</figure>

<figure>

  <picture>
    <source media="(max-width: 480px)" srcset="/about/assets/img/projects/2022/xiv_7-480.webp"></source>
    <source media="(max-width: 800px)" srcset="/about/assets/img/projects/2022/xiv_7-800.webp"></source>
    <source media="(max-width: 1400px)" srcset="/about/assets/img/projects/2022/xiv_7-1400.webp"></source>
    <!-- Fallback to the original file -->
    <img class="img-fluid figure-img l-page rounded z-depth-1" src="/about/assets/img/projects/2022/xiv_7.png" title="raidbufftracker" data-zoomable="">

  </picture>

</figure>

          </article>

        </div>

    </div>

    <!-- Footer -->    <footer class="sticky-bottom mt-5">
      <div class="container">
        ¬© Copyright 2022 Vasyl  Horbachenko. Powered by <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>.

      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" integrity="sha256-l/1pMF/+J4TThfgARS6KwWrk/egwuVvhRzfLAMQ6Ds4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha256-SyTu6CwrfOhaznYZPoolVw2rxoY7lKYKQvqbtqN93HI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Mansory & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/about/assets/js/mansory.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="/about/assets/js/zoom.js"></script><!-- Load Common JS -->
  <script src="/about/assets/js/common.js"></script>

    <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    
  </body>
</html>

